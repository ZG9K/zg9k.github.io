<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Desktop</title>
  <link rel="stylesheet" href="https://use.typekit.net/dsm0ynv.css">
  <style>
    :root {
      /* Change this to any image URL to swap the wallpaper */
      --desktop-bg: url("");
    }

    html,
    body {
      height: 100%;
      margin: 0;
      font-family: lores-9-narrow, sans-serif;
        background-color: white; /* fallback */
  background-image: 
    repeating-conic-gradient(#000 0% 25%, #fff 0% 50%);
  background-size: 2px 2px;
      overflow: hidden;
      cursor: default;
      user-select: none;
    }

    #desktop {
      position: relative;
      width: 100%;
      height: calc(100% - 42px); /* leave room for dock */
    }

    /* ---------------- Dock (taskbar) ---------------- */
    #dock {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      height: 42px;
      background: #c0c0c0;
      border-top: 2px solid #000;
      display: flex;
      align-items: center;
      padding: 4px 8px;
      gap: 6px;
    }
    .icon {
      width: 32px;
      height: 32px;
      background: #000;
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      cursor: pointer;
      border: 2px solid #000;
    }

    /* ---------------- Window ---------------- */
    .window {
      position: absolute;
      display: flex;
      flex-direction: column;
      background: #fff;
    box-shadow:
      0 0 0 2px #000,
      0 0 0 3px #fff,
      0 0 0 5px #000;
      min-width: 160px;
      min-height: 120px;
    }

    .titlebar {
      height:10px;
      background: #000;
      color: #fff;
      padding: 0px 6px;
      padding-bottom: 2px;
      cursor: move;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 4px;
      user-select: none;
    box-shadow: 5px -5px 0 0px black, -5px -5px 0 0 black, -5px -0px 0 0 black, 5px -0px 0 0 black;
    }
    /* --- close button for NEW windows only --- */
    .titlebar button.close{
      appearance:none;
      border:none; 
      cursor:pointer;
      background:#fff; 
      color:#000; 
      font-weight:bold;
      width:min-content; 
      height:min-content; 
      line-height:1;
      margin-left:auto;
    }
    .titlebar button.close:hover{ background:#696969; color:#fff; }

    .titlebar button:hover { background: #ccc; }

    .content {
      flex: 1;
      overflow: hidden;
      background: #dedede;
      padding: 2px;
    }

    /* ---------------- Content Styles ---------------- */
    .title,
    body, html {
        font-family: 'geneva-9-1', sans-serif;
        font-weight: normal;
        font-style: normal;
        font-size: 20px;
    }

    .title{
      transform:matrix(1, 0, 0, 1, -5, -3);
    }

    @font-face {
        font-family: 'geneva-9-1';
        src: url('assets/fonts/geneva-9-1.otf') format('opentype');
        font-weight: normal;
        font-style: normal;
    }
    .caps {
        text-transform: uppercase;
    }
    p {
        margin: 0 0 0px;
    }

    ul{
        margin:0px;
    }
    a {
        color: #000;
        text-decoration: none;
        font-weight: bold;
    }
    a:hover {
        text-shadow: #858585 0px 1px 0px;
    }
    .highlight{
        background-color: #b4b4b4;
        color: #ffffff;
    }
    /* custom list styling */
    .projects-list { list-style: none; padding-left: 0; }
    .projects-list li { margin: 4px 0; }
    .projects-list img { vertical-align: middle; margin-right: 4px; }
    .projects-list img { width: 14px; height: 14px; vertical-align: middle; margin-right: 8px; }

    /* blink cursor */
    .blink { animation: blink 1s steps(1) infinite; }
    @keyframes blink { 50% { opacity: 0; } }

    .styledTextInput{
      border: none;
      background: none;
      background-image: 
      repeating-conic-gradient(#000 0% 25%, #fff 0% 50%);
      background-size: 2px 2px;
      width:100%;
      font-family: 'geneva-9-1', sans-serif;
      font-size: 20px;
      margin-top: 5px;
      border-radius: none;
    }
    .styledTextInput:hover{
      background-image: 
      repeating-conic-gradient(#000 0% 25%, #fff 0% 50%);
      background-size: 2px 2px;
    }

    button{
      font-family: 'geneva-9-1', sans-serif;
      border-radius: none;
      border:none;
      background-color: none;
      margin-top:5px;
              color: #000;
        text-decoration: none;
        font-weight: bold;
        font-size: 20px;
        padding: 5px;
        box-shadow: inset -1px -1px 0px 0px black, inset 1px 1px 0px 0px white;
    }

      button:hover {
                background-color: #b4b4b4;
                box-shadow: inset -1px -1px 0px 0px white, inset 1px 1px 0px 0px black;
    }

    .buttonText{
      transform:matrix(1, 0, 0, 1, -20, -20);
    }
    
  </style>
</head>
<body><div id="desktop">
  <!-- ---------------- Projects Window ---------------- -->
  <div class="window" data-window-id="projects" style="left: 20vw; top: 127px; width: 400; height: 300;">
    <div class="titlebar"><span class="title">projects<span class="blink">_</span></span></div>
    <div class="content">
      <p class=caps>projects</p>
      <p class="highlight">[ok] loading local manifest: ./projects</p>
      <ul class="projects-list">
        <li>* <a href="projects/newmanse.html"><strong>the new manse</strong></a> — final vcd unit 3/4 project (2024)</li>
        <li>* <a href="disneylandToday/view.html"><strong>disneyland today</strong></a> — interactive recreation of the old tv dashboard ui</li>
      </ul>
      <p class="highlight">[info] 2 entries loaded | last update: mon 19 feb 2024</p>
    </div>
  </div>

  <!-- ---------------- Templates Window ---------------- -->
  <div class="window" data-window-id="templates" style="left: 58vw; top: 223px; width: 500px; height: 300px;">
    <div class="titlebar"><span class="title">student templates</span></div>
    <div class="content">
      <p class=caps>student templates</p>
      <p class="highlight">[warn] openai key not included — manual insertion required</p>
      <p>compiled reference scripts for use in ai education modules. tested under python 3.10+</p>
      <ul class="projects-list">
        <li>* <a href="templates/tbrpg.py" target="_blank"><strong>text based rpg</strong></a> — text based adventure game, similar to zork!</li>
        <li>* <a href="templates/jobscript.py" target="_blank"><strong>job interview script</strong></a> — basic gpt-powered q/a bot for roleplay scenarios</li>
        <li>* <a href="templates/imagegen.py" target="_blank"><strong>image generator</strong></a> — openai dall-e image prompt pipeline</li>
        <li>* <a href="templates/cosmicmachine.py" target="_blank"><strong>cosmic vending machine</strong></a> — the most advanced ai vending machine using pseudo-random metaphysics (no metal goods supplied)</li>
      </ul>
      <p class="highlight">[sys] path=/usr/edu/scripts/templates | 3 scripts active</p>
    </div>
  </div>

  <!-- ---------------- Cool Links Window ---------------- -->
  <div class="window" data-window-id="links" style="left: 17vw; top: 376px; width: 360px; height: 260px;">
    <div class="titlebar"><span class="title">web links</span></div>
    <div class="content">
      <p class=caps>web links</p>
      <p>external references & bookmarks of interest. <span class="highlight">[network ok]</span></p>
      <ul class="projects-list">
        <li>* <a href="https://slowroads.io/" target="_blank"><strong>slowroads.io</strong></a> — this got me through year 12</li>
        <li>* <a href="https://ashtondoughty.com/" target="_blank"><strong>ashtondoughty.com</strong></a> — this person seems pretty cool!</li>
        <li>* <a href="https://madebyyuma.com/" target="_blank"><strong>madebyyuma.com</strong></a> — this duck seems pretty cool!</li>
      </ul>
      <p class="highlight">[dns resolved] 3 sites online</p>
    </div>
  </div>

  <!-- ---------------- Contact Window ---------------- -->
  <div class="window" data-window-id="contact" style="left: 45vw; top: 607px; width: 380px; height: 180px;">
    <div class="titlebar"><span class="title">contact<span class="blink">_</span></span></div>
    <div class="content">
      <p class=caps>contact</p>
      <p>direct mail interface available via:</p>
      <p><a href="mailto:maxtbentley@gmail.com">maxtbentley@gmail.com</a></p>
      <p>or via discord @ZG9K</span></p>
      <p class="highlight">[ack] connection idle | status: reachable</p>
    </div>
  </div>

  <!-- ---------------- Clock Window ---------------- -->
  <div class="window" data-window-id="clock" style="width: 160px; left: 44vw; top: 370px;">
    <div class="titlebar"><span class="title">max bentley</span></div>
    <div class="content" style="font-size:18px;text-align:center;">
      <time id="clockDisplay"></time><br>
      <p class="highlight">[info] waiting for user input<span class="blink">...</span> </p>
      <input type="text" class="styledTextInput">
      <button><span class="buttonText">go!</span></button>
    </div>
  </div>
</div>


<script>
  const desktop = document.getElementById("desktop");

  /* ---------- helpers ---------- */
  const getMaxZ = () =>
    [...desktop.children].reduce((m, el) => Math.max(m, +el.style.zIndex || 0), 0);

  /* ---------- make any window draggable & closable ---------- */
function initWindow(win){
  const titlebar = win.querySelector(".titlebar");

  /* -- wire the close button once, at init -- */
  const btnCls = win.querySelector(".close");
  if (btnCls){
    btnCls.removeAttribute("onclick");
    btnCls.addEventListener("click", e=>{
      e.stopPropagation();   // don’t trigger drag
      win.remove();          // destroy window
    });
  }

  /* bring to front on any click */
  win.addEventListener("mousedown", () => win.style.zIndex = getMaxZ() + 1);

  /* drag logic */
  let ox, oy;
  titlebar.addEventListener("pointerdown", e=>{
    /* ignore clicks that started on the close button */
    if (e.target.closest(".close")) return;
    if (e.button !== 0) return;               // only left‑button

    ox = e.clientX - win.offsetLeft;
    oy = e.clientY - win.offsetTop;
    win.setPointerCapture(e.pointerId);
    win.style.zIndex = getMaxZ() + 1;

    const move = ev=>{
      win.style.left = `${ev.clientX - ox}px`;
      win.style.top  = `${ev.clientY - oy}px`;
    };
    const up = ev=>{
      win.releasePointerCapture(ev.pointerId);
      win.removeEventListener("pointermove", move);
      win.removeEventListener("pointerup",    up);
    };
    win.addEventListener("pointermove", move);
    win.addEventListener("pointerup",    up);
  });
}
  /* ---------- factory: produces ONE copy per href ---------- */
  window.createWindow = ({title="new window",html="<p>Hello!</p>",x=40,y=40,w=320,h=200,href=""}={})=>{
    if(href){
      const existing = desktop.querySelector(`.window[data-href="${href}"]`);
      if(existing){ existing.style.zIndex=getMaxZ()+1; return existing; }
    }

    const win = document.createElement("div");
    win.className = "window";
    if(href) win.dataset.href = href;
    win.style.cssText += `left:${x}px;top:${y}px;width:${w}px;height:${h}px;`;
    win.innerHTML =
      `<div class="titlebar">
         <span class="title">${title}</span>
         <button class="close" type="button">×</button>
       </div>
       <div class="content">${html}</div>`;
    desktop.appendChild(win);
    win.style.zIndex = getMaxZ() + 1;
    initWindow(win);
    return win;
  };

  /* ---------- mapped in‑desktop pages ---------- */
  const projectPages = {
    "projects/newmanse.html": `
      <section class="hero">
<iframe width="495" height="250" src="https://www.youtube.com/embed/1LXm8pBzSpo?si=vVbV1ehzasWV0Hhk" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen=false></iframe>
      </section>

      <p class="caps highlight">The New Manse</p>
      <p class="subheading">VCD 3/4 Final * 2024</p>

      <div class="links">
        <span>Video Links:</span>
        <a href="https://www.youtube.com/watch?v=1LXm8pBzSpo" target="_blank">The New Manse</a>·
        <a href="https://www.youtube.com/watch?v=dxm5qSfQu4I"  target="_blank">The Recital Space</a>
      </div>
      <hr style="border: none; border-top: 1.5px dotted #888; margin: 12px 0;">
      <p>This project was a redevelopment of the St Michael’s Grammar School Music Manse to accommodate new practice rooms, staff spaces, a student foyer, social areas, and a classroom/recital space.</p>
      <p>The brief only required exterior design for the New Manse and the recital space, but I ended up doing everything anyway  :)</p>
      <p>It was a great project and I loved fitting the new work into the existing architecture.</p>
    `
  };

  /* ---------- link‑click interception ---------- */
  document.addEventListener("click", e=>{
    const a = e.target.closest("a");
    if(!a) return;
    const href = a.getAttribute("href");
    if(projectPages[href]){
      e.preventDefault();
      createWindow({
        title: a.textContent.trim(),
        html : projectPages[href],
        w:500, h:500, x:120, y:80,
        href
      });
    }
  });

  /* ---------- clock ---------- */
  const clock = document.getElementById("clockDisplay");
  const tick  = () => { if(clock) clock.textContent = new Date().toLocaleString(); requestAnimationFrame(tick); };
  tick();

  /* ---------- initialise existing static windows ---------- */
  document.querySelectorAll(".window").forEach(initWindow);
</script>
</script>

</body>
</html>
